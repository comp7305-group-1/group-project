<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>COMP7305 Group 01 - SparkPi Submit ({{.RequestID}})</title>
  <script type="application/javascript">
function ready() {
  var wsUriStdout = 'ws://localhost:12345/SparkPiSubmitStdoutWS?rid=';
  {{/* var wsUriStderr = 'ws://localhost:12345/SparkPiSubmitStderrWS?rid='; */}}
  var rid;
  var stdout;
  {{/* var stderr; */}}
  var socketStdout;
  {{/* var socketStderr; */}}

  rid = document.getElementById("rid").value;
  stdout = document.getElementById('stdout');
  {{/* stderr = document.getElementById('stderr'); */}}

  // WebSocket for stdout
  socketStdout = new WebSocket(wsUriStdout + rid);
  socketStdout.onopen = function(event) {
    console.log("socketStdout.onopen");
  };
  socketStdout.onmessage = function(event) {
    // console.log(event.data);
    stdout.value += event.data;
  };
  socketStdout.onclose = function(event) {
    console.log("socketStdout.onclose");
  };
  socketStdout.onerror = function(event) {
    console.log('socketStdout.onerror');
  };

  // WebSocket for stderr
  {{/* socketStderr = new WebSocket(wsUriStderr + rid);
  socketStderr.onopen = function(event) {
    console.log("socketStderr.onopen");
  };
  socketStderr.onmessage = function(event) {
    console.log(event.data);
    stderr.value += event.data;
  };
  socketStderr.onclose = function(event) {
    console.log("socketStderr.onclose");
  };
  socketStderr.onerror = function(event) {
    console.log('socketStdout.onerror');
  }; */}}
}
{{/* document.addEventListener("DOMContentLoaded", ready); */}}
  </script>
</head>
<body onload="javascript:ready();">
  <h1>COMP7305 Group 01 - SparkPi Submit ({{.RequestID}})</h1>
  <form>
    <label for="stdout">Standard Output:</label><br>
    <textarea id="stdout" name="stdout" cols="80" rows="25" readonly="readonly" style="font-family: monospace"></textarea><br>
    <br>
    <label for="stderr">Standard Error:</label><br>
    <textarea id="stderr" name="stderr" cols="80" rows="25" readonly="readonly" style="font-family: monospace"></textarea><br>
    <br>
    <label for="result">Result:</label><br>
    <input type="text" id="result" name="result" size="80" readonly="readonly" style="font-family: monospace">
    <input type="hidden" id="rid" name="rid" value="{{.RequestID}}">
  </form><br>
  <a href="/SparkPi">Go back to SparkPi</a>
</body>
</html>
